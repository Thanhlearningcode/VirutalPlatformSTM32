<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Embedded Virtual Platform Simulator</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="navbar">
        <div class="container" style="display:flex;align-items:center;justify-content:space-between;padding:12px 16px;">
            <div class="brand">Virtual STM32 Platform</div>
            <div style="font-size:12px;color:var(--muted)">Demo UI · localhost</div>
        </div>
    </div>
    <div class="container">
        <div class="module" id="cpu">
            <h2>CPU (Cortex-M3)</h2>
            <div>
                <button id="btn-cpu-reset">Reset</button>
                <button class="secondary" id="btn-cpu-step">Step</button>
            </div>
            <div class="status" id="cpu-status">Status: Ready</div>
            <table class="register-table" id="cpu-registers">
                <tr><th>Register</th><th>Value</th></tr>
                <tr><td>PC</td><td id="reg-pc">0x00000000</td></tr>
                <tr><td>SP</td><td id="reg-sp">0x00000000</td></tr>
                <tr><td>LR</td><td id="reg-lr">0x00000000</td></tr>
            </table>
            <div class="log" id="cpu-log"></div>
        </div>

        <div class="module" id="uart">
            <h2>UART</h2>
            <div style="display:grid;grid-template-columns: 1fr auto; gap: 8px; align-items: end;">
                <div>
                    <label for="uart-baud">Baudrate</label>
                    <input type="number" id="uart-baud" value="9600" min="1200" max="115200" step="100" />
                </div>
                <div>
                    <label for="uart-text">Send Data</label>
                    <div style="display:flex; gap:8px;">
                        <input type="text" id="uart-text" placeholder="Hello DMA" />
                        <button id="btn-uart-send">Send</button>
                    </div>
                </div>
            </div>
            <div class="status" id="uart-status">Status: Idle</div>
            <table class="register-table" id="uart-registers">
                <tr><th>Register</th><th>Value</th></tr>
                <tr><td>DR</td><td id="uart-dr">0x00</td></tr>
                <tr><td>SR</td><td id="uart-sr">0x00</td></tr>
            </table>
            <div class="log" id="uart-log"></div>
        </div>

        <div class="module" id="spi">
            <h2>SPI</h2>
            <div style="display:grid;grid-template-columns: repeat(3, 1fr); gap: 8px; align-items: end;">
                <div>
                    <label for="spi-speed">Speed (Hz)</label>
                    <input type="number" id="spi-speed" value="1000000" min="10000" max="10000000" step="10000" />
                </div>
                <div>
                    <label for="spi-mode">Mode</label>
                    <select id="spi-mode"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>
                </div>
                <div>
                    <label for="spi-hex">Data</label>
                    <div style="display:flex; gap:8px;">
                        <input type="text" id="spi-hex" placeholder="AA,BB" />
                        <button id="btn-spi-xfer">Transfer</button>
                    </div>
                </div>
            </div>
            <div class="log" id="spi-log"></div>
        </div>

        <div class="module" id="i2c">
            <h2>I2C</h2>
            <div style="display:grid;grid-template-columns: repeat(3, 1fr); gap: 8px; align-items: end;">
                <div>
                    <label for="i2c-speed">Speed (Hz)</label>
                    <input type="number" id="i2c-speed" value="100000" min="1000" max="1000000" step="1000" />
                </div>
                <div>
                    <label for="i2c-addr">Address</label>
                    <input type="text" id="i2c-addr" value="0x00" />
                </div>
                <div>
                    <label for="i2c-hex">Data</label>
                    <div style="display:flex; gap:8px;">
                        <input type="text" id="i2c-hex" placeholder="AA,BB" />
                        <button id="btn-i2c-xfer">Transfer</button>
                    </div>
                </div>
            </div>
            <div class="log" id="i2c-log"></div>
        </div>

        <div class="module" id="timer">
            <h2>Timer</h2>
            <div style="display:flex; gap:8px; align-items:end;">
                <div>
                    <label for="timer-value">Value</label>
                    <input type="number" id="timer-value" min="0" value="0" />
                </div>
                <div style="display:flex; gap:8px;">
                    <button id="btn-timer-set">Set</button>
                    <button class="secondary" id="btn-timer-start">Start</button>
                    <button class="ghost" id="btn-timer-stop">Stop</button>
                </div>
            </div>
            <div class="log" id="timer-log"></div>
        </div>

        <div class="module" id="dma">
            <h2>DMA</h2>
            <div style="display:grid;grid-template-columns: repeat(4, 1fr); gap: 8px; align-items: end;">
                <div>
                    <label for="dma-cpar">CPAR (hex or int)</label>
                    <input type="text" id="dma-cpar" value="0x40000000" />
                </div>
                <div>
                    <label for="dma-cmar">CMAR (SRAM addr)</label>
                    <input type="number" id="dma-cmar" value="128" />
                </div>
                <div>
                    <label for="dma-len">Length</label>
                    <input type="number" id="dma-len" value="16" />
                </div>
                <div style="display:flex; gap:8px;">
                    <button id="btn-dma-xfer">Run DMA</button>
                    <button class="ghost" id="btn-sram-read">Read SRAM</button>
                </div>
            </div>
            <div class="log" id="dma-log"></div>
        </div>

        <div class="module" id="can">
            <h2>CAN</h2>
            <div style="display:grid;grid-template-columns: repeat(5, 1fr); gap:8px; align-items:end;">
                <div>
                    <label for="can-src">Source Node</label>
                    <select id="can-src"><option value="1">1</option><option value="2">2</option></select>
                </div>
                <div>
                    <label for="can-id">ID</label>
                    <input type="number" id="can-id" value="291" />
                </div>
                <div>
                    <label for="can-dlc">DLC</label>
                    <input type="number" id="can-dlc" value="2" min="0" max="8" />
                </div>
                <div>
                    <label for="can-data">Data (hex, comma)</label>
                    <input type="text" id="can-data" placeholder="AA,BB" />
                </div>
                <div style="display:flex; gap:8px; align-items:end;">
                    <div style="display:flex;align-items:center;gap:6px;margin-bottom:10px;">
                        <input type="checkbox" id="can-ext" /> <label for="can-ext" style="margin:0;">Extended</label>
                    </div>
                    <button id="btn-can-send">Send</button>
                </div>
            </div>
            <div class="log" id="can-log"></div>
        </div>

        <div class="footer">© Virtual STM32 Demo</div>
    </div>

    <script src="assets/js/app.js"></script>
</body>
</html>
